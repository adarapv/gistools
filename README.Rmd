# gistools
*Adhara Pardo* (adharapv@gmail.com) 

An R package for analysing species diversity patterns along elevational gradients. This package is meant to provide a collection of self-written functions for the analyses of elevational diversity patterns.

The package can be installed by typing:

```r
# the devtools package is needed to be able to load the package
# install.packages("devtools")
library(devtools)
install_github("adarapv/gistools")
library(gistools)
``` 
# Example usage
What follows is some simple examples of how this package can be used to analyse spatial landscape and biodiversity data. All the examples below make use
of the publicly available dataset published in John T. Longino and Robert K. Colwell. 2011. Density compensation, species composition, and richness of ants on a neotropical elevational gradient. Ecosphere 2:art29.

## Required Packages

```{r packages, message=FALSE}
library(raster);library(rgeos)
library(SDMTools)
```


## Calculate landscape metrics around buffers of a given size
The function `buffercreate()` `betabas()` calculates buffers for sites, matrix corine dataset (reference), landscape metrics fragstats (reference). 

Example using the corine data for the province of Caceres (Spain):

```r
#' Partition beta diversity into richhness and replacement components (Carvalho et al. 2012)
#'@indat=name of dataframe containing species incidence data 
#'@alt=character vector indicating column name for altitude values
#'@group=character vector indicating column name for elevational gradient IDs 
#'(if there is more than one study area)


# Plot Corine Land Cover for the province of Caceres
plot(corine,legend=FALSE,box=FALSE,axes=FALSE,main="Corine Land Cover 100x100m resolution")

# Display 20 random sites
points(sites[,1],sites[,2],col="black",pch="+",cex=1.5)

```
![Graphical output](corine2.png)

```r

# Calculate landscape metrics for a sample of 20 sites (buffer size 5km)
buffresults<-buffercreate(inrast=corine,inpoint=sites,bufsize=5000,rastcell=100)

... Calculating buffer for site 1  ...
... Calculating buffer for site 2  ...
... Calculating buffer for site 3  ...
... Calculating buffer for site 4  ...
... Calculating buffer for site 5  ...
... Calculating buffer for site 6  ...

# Examine results for first 8 columns
head(buffresults)[1:8]
        x       y class n.patches total.area prop.landscape patch.density total.edge
1 2860658 2001861    18         1      10000   0.0001296849  1.296849e-08        400
2 2860658 2001861    22         9   39000000   0.5057709765  1.167164e-07      85000
3 2860658 2001861    23         1    2250000   0.0291790948  1.296849e-08      18200
4 2860658 2001861    26         9    6450000   0.0836467384  1.167164e-07      50800
5 2860658 2001861    28         3   28510000   0.3697315523  3.890546e-08      88000
6 2860658 2001861    29         1     280000   0.0036311762  1.296849e-08       4800
```

References

Baselga, A. (2010) Partitioning the turnover and nestedness components of beta diversity. 
Global Ecology and Biogeography, 19, 134143.

